{% extends 'base.html' %}

{% load static from staticfiles %}

<!-- include crispy -->
{% load crispy_forms_tags %}

<!-- Load custom tags for templates -->
{% load define_action %}

{% block title %}Annotate{% endblock %}


{% block content %}
    <div class="d-flex justify-content-between flex-wrap flex-sm-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1>Annotate: {{survey}}</h1>
    </div>


    <form action="" method="post">
        {% csrf_token %}
        {{ form.id }}

        <div class="container-fluid">
            {% for choice in choices %}
                {% if forloop.counter|divisibleby:2 %}
                    {% define "white;" as bg_colour %}
                {% else %}
                    {% define "lightgray;" as bg_colour %}
                {% endif %}

                <div class="row">
                    <label class="col-sm-12 text-left annotation_id" id="{{choice_object.id}}" style="background:{{bg_colour}}">
                        <input type="text" style="z-index:2;" value="{{ choice }}" disabled class="select_me nothing">

                        {% for color, text in choices_colored.items %}
                            {% if text in choice.choice_text %}
                                <div style="position:absolute; z-index:1; top:-30px; opacity:0.3;">
                                    <span style="background-color: {{ color }}; width:auto;">
                                        {% for ch in text %}
                                            &#160
                                        {% endfor %}
                                    </span>
                                </div>
                            {% endif %}
                        {% endfor %}



                    </label>
                </div>
            {% endfor %}
        </div>


        <div class="row container-fluid">
            <button type="button" class="col-sm-2 btn-success">Add to all</button>
            <button type="button" class="col-sm-2 btn-outline-success">Add to single</button>

            <div class="col-sm-2">
                {{ form.classification }}
            </div>

            <div class="col-sm-2" id="selection" >
                <input id="annotation_help"
                       value="Please make your selection"
                       class="textinput textInput form-control"
                       disabled >
            </div>

            <button type="button" class="col-sm-2 btn-outline-danger">Remove single</button>
            <button type="button" class="col-sm-2 btn-block btn-danger">Remove all</button>
        </div>
        <br>

        <button type="submit" class="btn btn-block btn-primary">Save annotation</button>
    </form>
{% endblock %}


